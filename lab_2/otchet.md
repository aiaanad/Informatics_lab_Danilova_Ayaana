Лабораторная работа №2:
Знакомство с bash-скриптами(сценариями)


1.Добавление Шебанг(абсолютный путь к интерпретатору bash)

    #!/bin/bash

2.Разделение входной строки по ".", проверка полученных значений, их присваивание элементам массива. 

Точка добавлена в конец str, чтобы последняя часть адреса не потерялась.

last - первое числовое значение следующее за ".".

count - индекс элемента из array

array() - сам массив

    str=$1 
    str+='.'
    last=0
    count=0
    array=()

В цикле for проходимся по всем элементам str, если элемент не явлвяется цифрой, то по хорошему, это должно значить, что мы встретили наш разделитель - ".".
Тогда находим длину цепочки из цифр и прсваиваем элементу массива числовую строку. После проверяем, не превосходит ли значение 255. В случае, превышения максимально допустимого десятичного значения программа предварительно завершается и выводится сообщение об ошибке.

    # разделение строки
    for (( i=0; i<${#str}; i++ )); do 
        elem="${str:$i:1}" 
        if ! [[ $elem =~ [0-9] ]]; then
            let len=i-last    
            array[$count]="${str:$last:$len}"
   
            # проверка на корректность 
            if (( array[$count] > 255 )); then
                echo "---Incorrect IP---"
                exit 1
            fi
     
            let last=i+1
            let count=count+1
  
        fi
    done

3.Снова проверка. Состоит ли точно наш адрес только из 4 элементов.

    # проверка на корректность
    if (( ${#array[@]} != 4 )); then
        echo "---Incorrect IP---"
        exit 1
    fi

4.Перевод в двоичную систему счисления. Создается массив всевозможных бинарных восьмизначных чисел.
Получится 2^8 = 256 значений, где CONV[i] = двоичная запись десятичного числа i, где i = 0, 1, 2, ... , 255. В цикле for для каждой части ip находим его двоичную запись и соеднияем в переменную answer. При выводе, лишнюю точку не выводим.

    answer=""
    CONV=({0..1}{0..1}{0..1}{0..1}{0..1}{0..1}{0..1}{0..1})
    for i in ${array[@]}; do
        answer+=${CONV[$i]}
        answer+="."
    done

    echo ${answer[@]:0:35}


Скриншот файла целиком:
![](C:\Users\Далаана\Desktop\photoforlab\lab2screen.jpeg)


Пример её работы:


![](C:\Users\Далаана\Desktop\photoforlab\testlab2screen.png)